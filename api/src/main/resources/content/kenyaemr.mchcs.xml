<?xml version="1.0" encoding="UTF-8"?>
<!--

    This Source Code Form is subject to the terms of the Mozilla Public License,
    v. 2.0. If a copy of the MPL was not distributed with this file, You can
    obtain one at http://mozilla.org/MPL/2.0/. OpenMRS is also distributed under
    the terms of the Healthcare Disclaimer located at http://openmrs.org/license.

    Copyright (C) OpenMRS Inc. OpenMRS is a registered trademark and the OpenMRS
    graphic logo is a trademark of OpenMRS Inc.

-->
<beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

	<!-- ===================== Program ===================== -->

	<bean id="kpsystem.mchcs.program" class="org.openmrs.module.kpcore.program.ProgramDescriptor">
		<property name="targetUuid" value="${metadata.program.MCH_CS}" />
		<property name="eligibilityCalculation" value="org.openmrs.module.kpsystem.calculation.library.mchcs.EligibleForMchcsProgramCalculation" />
		<property name="defaultEnrollmentForm" ref="kpsystem.form.mchcsEnrollment" />
		<property name="defaultCompletionForm" ref="kpsystem.form.mchcsCompletion" />
		<property name="patientForms">
			<set>
				<ref bean="kpsystem.form.mchcsImmunization" />
				<ref bean="kpsystem.form.mchcsHeiExit" />

			</set>
		</property>
		<property name="visitForms">
			<set>
				<ref bean="kpsystem.form.mchcsFollowupVisit" />
				<ref bean="kpsystem.common.form.geneXpert" />
			</set>
		</property>
		<property name="reports">
			<set>
				<ref bean="kpsystem.mchcs.report.notPcrTested" />
				<ref bean="kpsystem.mchcs.report.notAntibodyTested" />
				<ref bean="kpsystem.mchcs.report.feedingOption" />
				<ref bean="kpsystem.mchcs.report.notPcrConfirmatoryTested" />
				<ref bean="kpsystem.mchcs.report.infantNotOnCTX" />
				<ref bean="kpsystem.mchcs.report.infantWithoutPcp" />
				<ref bean="kpsystem.mchcs.report.heiRegister" />
				<!--<ref bean="kpsystem.mchcs.report.moh710" />
				<ref bean="kpsystem.mchcs.report.moh510" />
				<ref bean="kpsystem.mchcs.report.moh511" />
				<ref bean="kpsystem.mchcs.report.vaccinationAppointments" />
				<ref bean="kpsystem.mchcs.report.defaulter" />-->
			</set>
		</property>
		<property name="fragments">
			<map>
				<entry key="enrollment-summary" value="kpsystem:program/mchcs/mchcsEnrollmentSummary" />
				<entry key="care-panel" value="kpsystem:program/mchcs/mchcsCarePanel" />
				<entry key="completion-summary" value="kpsystem:program/mchcs/mchcsCompletionSummary" />
			</map>
		</property>
		<property name="order" value="400" />
	</bean>

	<!-- ===================== Identifiers ===================== -->

	<!-- HEI unique Number -->
	<bean id="kpsystem.identifier.hei" class="org.openmrs.module.kpcore.identifier.IdentifierDescriptor">
		<property name="targetUuid" value="${metadata.identifiertype.HEI_UNIQUE_NUMBER}" />
		<property name="order" value="80" />
	</bean>

	<!-- ===================== Forms ===================== -->

	<!--  mchcs  Enrollment -->
	<bean id="kpsystem.form.mchcsEnrollment" class="org.openmrs.module.kpcore.form.FormDescriptor">
		<property name="targetUuid" value="8553d869-bdc8-4287-8505-910c7c998aff" />
		<property name="apps">
			<set>
				<ref bean="kpsystem.app.registration" />
				<ref bean="kpsystem.app.intake" />
				<ref bean="kpsystem.app.clinician" />
				<ref bean="kpsystem.app.chart" />
			</set>
		</property>
		<property name="icon" value="kpui:forms/generic.png" />
		<property name="htmlform" value="kpsystem:mchcs/mchcsEnrollment.html" />
	</bean>

	<!-- mchcs  Follow up -->
	<bean id="kpsystem.form.mchcsFollowupVisit" class="org.openmrs.module.kpcore.form.FormDescriptor">
		<property name="targetUuid" value="755b59e6-acbb-4853-abaf-be302039f902" />
		<property name="apps">
			<set>
				<ref bean="kpsystem.app.registration" />
				<ref bean="kpsystem.app.intake" />
				<ref bean="kpsystem.app.clinician" />
				<ref bean="kpsystem.app.chart" />
			</set>
		</property>
		<property name="icon" value="kpui:forms/generic.png" />
		<property name="htmlform" value="kpsystem:mchcs/mchcsFollowupVisit.html" />
	</bean>

	<!--  mchcs  Immunization -->
	<bean id="kpsystem.form.mchcsImmunization" class="org.openmrs.module.kpcore.form.FormDescriptor">
		<property name="targetUuid" value="b4f3859e-861c-4a63-bdff-eb7392030d47" />
		<property name="apps">
			<set>
				<ref bean="kpsystem.app.registration" />
				<ref bean="kpsystem.app.intake" />
				<ref bean="kpsystem.app.clinician" />
				<ref bean="kpsystem.app.chart" />
			</set>
		</property>
		<property name="icon" value="kpui:forms/generic.png" />
		<property name="htmlform" value="kpsystem:mchcs/mchcsImmunization.html" />
	</bean>

	<!-- mchcs  Completion -->
	<bean id="kpsystem.form.mchcsCompletion" class="org.openmrs.module.kpcore.form.FormDescriptor">
		<property name="targetUuid" value="1dd02c43-904b-4206-8378-7b1a8414c326" />
		<property name="apps">
			<set>
				<ref bean="kpsystem.app.registration" />
				<ref bean="kpsystem.app.intake" />
				<ref bean="kpsystem.app.clinician" />
				<ref bean="kpsystem.app.chart" />
			</set>
		</property>
		<property name="icon" value="kpui:forms/generic.png" />
		<property name="htmlform" value="kpsystem:mchcs/mchcsDiscontinuation.html" />
	</bean>


	<!-- mchcs HEI exit form  -->
	<bean id="kpsystem.form.mchcsHeiExit" class="org.openmrs.module.kpcore.form.FormDescriptor">
		<property name="targetUuid" value="d823f1ef-0973-44ee-b113-7090dc23257b" />
		<property name="apps">
			<set>
				<ref bean="kpsystem.app.registration" />
				<ref bean="kpsystem.app.intake" />
				<ref bean="kpsystem.app.clinician" />
				<ref bean="kpsystem.app.chart" />
			</set>
		</property>
		<property name="icon" value="kpui:forms/generic.png" />
		<property name="htmlform" value="kpsystem:mchcs/mchcsHeiOutcomes.html" />
	</bean>

	<!-- ===================== Reports ===================== -->

	<bean id="kpsystem.mchcs.report.notPcrTested" class="org.openmrs.module.kpcore.report.CalculationReportDescriptor">
		<property name="targetUuid" value="aa3c1882-a11a-415a-b30b-8d9f76f63bf7" />
		<property name="name" value="Patients without PCR test" />
		<property name="calculation" value="org.openmrs.module.kpsystem.calculation.library.mchcs.NeedsPcrTestCalculation" />
		<property name="apps"><set><ref bean="kpsystem.app.reports" /></set></property>
	</bean>

	<bean id="kpsystem.mchcs.report.notAntibodyTested" class="org.openmrs.module.kpcore.report.CalculationReportDescriptor">
		<property name="targetUuid" value="cb5f0a5c-74dd-4372-86b2-4312829a876e" />
		<property name="name" value="Patients without antibody test" />
		<property name="calculation" value="org.openmrs.module.kpsystem.calculation.library.mchcs.NeedsAntibodyTestCalculation" />
		<property name="apps"><set><ref bean="kpsystem.app.reports" /></set></property>
	</bean>

	<bean id="kpsystem.mchcs.report.feedingOption" class="org.openmrs.module.kpcore.report.CalculationReportDescriptor">
		<property name="targetUuid" value="1406dd54-c5f9-456a-83ac-045ac8af7422" />
		<property name="name" value="Infant feeding options" />
		<property name="calculation" value="org.openmrs.module.kpsystem.calculation.library.mchcs.InfantFeedingOptionsCalculation" />
		<property name="apps"><set><ref bean="kpsystem.app.reports" /></set></property>
	</bean>

	<bean id="kpsystem.mchcs.report.notPcrConfirmatoryTested" class="org.openmrs.module.kpcore.report.CalculationReportDescriptor">
		<property name="targetUuid" value="561334be-e553-4c6b-815c-2194be860a8c" />
		<property name="name" value="Infants without PCR confirmatory test" />
		<property name="calculation" value="org.openmrs.module.kpsystem.calculation.library.mchcs.NotTakenPcrConfirmatoryTestCalculation" />
		<property name="apps"><set><ref bean="kpsystem.app.reports" /></set></property>
	</bean>

	<bean id="kpsystem.mchcs.report.infantNotOnCTX" class="org.openmrs.module.kpcore.report.CalculationReportDescriptor">
		<property name="targetUuid" value="0552c06d-2893-47a0-beab-5acd220d4af5" />
		<property name="name" value="Infants never taken CTX" />
		<property name="calculation" value="org.openmrs.module.kpsystem.calculation.library.mchcs.InfantNeverTakenCTXCalculation" />
		<property name="apps"><set><ref bean="kpsystem.app.reports" /></set></property>
	</bean>

	<bean id="kpsystem.mchcs.report.infantWithoutPcp" class="org.openmrs.module.kpcore.report.CalculationReportDescriptor">
		<property name="targetUuid" value="8ac01196-4f3e-464e-8d28-38d898d0bfef" />
		<property name="name" value="Infants never on prophylaxis" />
		<property name="calculation" value="org.openmrs.module.kpsystem.calculation.library.mchcs.InfantNeverTakenProphylaxisCalculation" />
		<property name="apps"><set><ref bean="kpsystem.app.reports" /></set></property>
	</bean>
	
	<bean id="kpsystem.mchcs.report.moh710" class="org.openmrs.module.kpcore.report.IndicatorReportDescriptor">
		<property name="targetUuid" value="f63a2d76-a763-443d-aa74-4440d3c08e9e" />
		<property name="name" value="MOH 710" />
		<property name="description" value="MOH Immunization Report" />
		<property name="apps"><set><ref bean="kpsystem.app.reports" /></set></property>
		<property name="template" value="kpsystem:moh710.xls" />
	</bean>	

	<bean id="kpsystem.mchcs.report.moh510" class="org.openmrs.module.kpcore.report.HybridReportDescriptor">
		<property name="targetUuid" value="83e61bd1-a121-4355-bcbd-fa655c24166a" />
		<property name="name" value="MOH 510" />
		<property name="description" value="Permanent Immunization Register" />
		<property name="apps"><set><ref bean="kpsystem.app.reports" /></set></property>
		<property name="template" value="kpsystem:moh510.xls" />
	</bean>

	<bean id="kpsystem.mchcs.report.moh511" class="org.openmrs.module.kpcore.report.HybridReportDescriptor">
		<property name="targetUuid" value="759cf726-8f51-4fa7-8b9f-8184a468e023" />
		<property name="name" value="MOH 511" />
		<property name="description" value="CWC Register(MOH 511)" />
		<property name="apps"><set><ref bean="kpsystem.app.reports" /></set></property>
		<property name="template" value="kpsystem:moh511.xls" />
	</bean>
	
	<bean id="kpsystem.mchcs.report.vaccinationAppointments" class="org.openmrs.module.kpcore.report.HybridReportDescriptor">
		<property name="targetUuid" value="7a2e9b40-5d34-4528-92c0-ef5efcc18c45" />
		<property name="name" value="Vaccination Appointment List" />
		<property name="description" value="Appointment List for Vaccination" />
		<property name="apps"><set><ref bean="kpsystem.app.reports" /></set></property>
		<property name="template" value="kpsystem:vaccination_appointment_list.xls" />
	</bean>

	<bean id="kpsystem.mchcs.report.defaulter" class="org.openmrs.module.kpcore.report.HybridReportDescriptor">
		<property name="targetUuid" value="2211bbce-ff75-4ef5-b993-8ecbe7d94e25" />
		<property name="name" value="CWC Defaulter" />
		<property name="description" value="CWC Defaulter Report" />
		<property name="apps"><set><ref bean="kpsystem.app.reports" /></set></property>
		<property name="template" value="kpsystem:cwc_defaulter.xls" />
	</bean>

	<!-- hei register-->
	<bean id="kpsystem.mchcs.report.heiRegister" class="org.openmrs.module.kpcore.report.HybridReportDescriptor">
		<property name="targetUuid" value="449b8578-b834-11e8-96f8-529269fb1459" />
		<property name="name" value="HEI Register" />
		<property name="description" value="HEI Register" />
		<property name="apps">
			<set>
				<ref bean="kpsystem.app.reports" />
			</set></property>
		<property name="template" value="kpsystem:pmtct/hei_register_template.xls" />
		<property name="repeatingSection" value="sheet:1,row:8,dataset:HEIRegister" />
	</bean>

</beans>