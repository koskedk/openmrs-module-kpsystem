<!--
  ~ The contents of this file are subject to the OpenMRS Public License
  ~ Version 1.0 (the "License"); you may not use this file except in
  ~ compliance with the License. You may obtain a copy of the License at
  ~ http://license.openmrs.org
  ~
  ~ Software distributed under the License is distributed on an "AS IS"
  ~ basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  ~ License for the specific language governing rights and limitations
  ~ under the License.
  ~
  ~ Copyright (C) OpenMRS, LLC.  All Rights Reserved.

-->
<htmlform>

    <script type="text/javascript" src="../moduleResources/kpsystem/scripts/moment.js"></script>
    <script type="text/javascript">
        $.fn.noText = function() {/*use the jquery prototype technology to make a chainable clear field method*/
            if(this.is('clinicVisit_form')){ /*check to c if the element type is an input*/
                this.val('');/*clear the input field*/
            }return this;/*means it is chainable*/
        };
        $('input').noText();
        var HepatitisbScreened  = function () {
            var HepbReferred = getValue("hepb_referred.value");
            var HepbScreened = getValue("hepb_screened.value");
            if(HepbScreened ==1066) {

                $('#visit div').empty();

                jQuery('#visit div').html('');
                jq('.clinicVisit_form div').html('');


                $( "clinic_visit" ).empty();
                $( ".clinicVisit_form" ).empty();

                $("#hepb_treated").val('');
                $("#hepb_results").val('');
                $("#hepb_referred").val('');
                $("#hepbtxt").val('');

                 }
            else{
                jq("#hepb_treated input").prop("disabled", false);
                jq("#hepb_results input").prop("disabled", false);
                jq("#hepb_screened input").prop("disabled", false);
                jq("#hepb_referred input").prop("disabled", false);
                jq("#hepbtxt input").prop("disabled", false);

            }

            if(HepbReferred=="true" &amp;&amp; HepbScreened!=703){
                jq("#hepbtxt input").prop("disabled", false);
            }else{
                jq("#hepbtxt input").prop("disabled", true);
            }

        }

        //On Ready
        $(document).ready(function () {


            $( "select" )
                .change(function () {
                    var typeOfPep = getValue("typeofpep.value");
                    if(typeOfPep=="160632"){
                        jq("#typeofpeptxt input").prop("disabled", false);
                    }else{
                        jq("#typeofpeptxt input").prop("disabled", true);
                    }
                })

            $('input').on('click',function () {

                if(prep=="true"){
                    jq("#preptext input").prop("disabled", false);
                }else{
                    jq("#preptext input").prop("disabled", true);
                }

            });

        });
        //Before Submit
        beforeSubmit.push(function() {


        });
    </script>

    <div class="ke-form-header">
        <table style="width: 100%">
            <tr>
                <td>
                    <ifMode mode="ENTER">
                        <script type="text/javascript">
                            jq(function(){
                                //setValue("encounter-date.value", "");
                            });
                        </script>
                    </ifMode>
                    <ifMode mode="EDIT">
                        <script type="text/javascript">
                            jq(function(){

                                //First test
                                var firstTest = getField("hiv-test1-result.value").val();
                                //Negative
                                if(firstTest ==664) {

                                    jq("#hiv-test2-result select").prop("disabled", true);
                                    jq(".kit-name2 select").prop("disabled", true);
                                    jq(".lot-number2 input").prop("disabled", true);
                                    jq("#expiry-date2 input").prop("disabled", true);
                                    getField('hiv-final-result.value').val(664);
                                    jq('#ccc-no input').prop("disabled", true);

                                }

                            });
                        </script>
                    </ifMode>

                </td>

            </tr>
        </table>
    </div>
    <!--=============Work flow==================-->
    <ifMode mode="VIEW" include="true">
        <div>
            <table style="width: 100%">
                <tr>
                    <td align="left">
                        Observation Date:
                    </td>
                    <td>
                        Unique Client Number
                    </td>
                    <td align="right">
                        Gender Identity:
                    </td>
                </tr>
                <tr>
                    <td>
                        16-Jan-2019
                    </td>
                    <td>
                        Test
                    </td>
                    <td align="right">
                        Test
                    </td>
                </tr>
            </table>
        </div>

    </ifMode>
    <!-- ============ end work flow =================-->



    <div class="ke-form-header">
        <table width="100%">
            <tr>
                <td>Date:
                    <encounterDate id="encounter-date" showTime="true"/>
                </td>
                <td>Location:
                    <encounterLocation default="GlobalProperty:kenyaemr.defaultLocation" type="autocomplete"/>
                </td>
            </tr>
        </table>
    </div>



    <!--STI Treatment Form-->
    <fieldset id="obs/gyn">
        <legend>STI Treatment Form</legend>

        <table border="0" width="100%" cellspacing="0" cellpadding="0">

            <tr>
                <td width="156" valign="top"><p>Reason for visit</p></td>

                <td width="156" colspan="4" valign="top"><p>  <obs id="hepb_results" class="consent" conceptId="1322"
                                                       answerConceptIds="664,
                                                            703, 782, 702"  answerLabels="Asymptomatic,Symptomatic, Quartely Screening checkup, follow up"
                                                       style="radio" />
                </p></td>

            </tr>
            <tr>
                <td width="156" valign="top"><p>Genital Examination Done</p></td>

                <td width="156" valign="top"><p>  <obs id="cervical_screened" class="consent" conceptId="164934"
                                                       style="radio" answerConceptIds="1065,1066" /></p></td>


                <td width="156" colspan="3" valign="top"><p> Type of syndrome infection <obs id="onfamilyplanning" class="consent" conceptId="165068"
                                                       answerConceptIds="160737,
                                                            165064, 165067"
                                                       style="dropdown" rows="2" />

                </p></td>

            </tr>
            <tr>

                <td width="156" valign="top"><p> Drug Prescription
                </p></td>
                <td width="156" valign="top"><p> <obs id="cervical_screened" class="consent" conceptId="164934"
                                                      style="radio" answerConceptIds="1065,1066" /></p></td>
                <td width="156" valign="top"><p> link to Drug Order</p></td>
            </tr>
            <tr>

                <td width="156" valign="top"><p>Client Referred for lab investigation
                </p></td>
                <td width="156" valign="top"><p> <obs id="cervical_screened" class="consent" conceptId="164934"
                                                      style="radio" answerConceptIds="1065,1066" /></p></td>
                <td width="156" valign="top"><p> link to Lab Order Form</p></td>
            </tr>
            <tr>

                <td width="156" valign="top"><p>Client Referred to other health facility</p></td>
                <td width="156" valign="top"><p> <obs id="cervical_screened" class="consent" conceptId="164934"
                                                      style="radio" answerConceptIds="1065,1066" /></p></td>

                <td width="156" colspan="2" valign="top"><p>Specify Facility  <obs id="onfamilyplanning" class="consent" conceptId="165068"
                                                       answerConceptIds="160737,
                                                            165064, 165067"
                                                       style="dropdown" rows="2" />

                </p></td>
            </tr>
            <tr>
                <td width="156" valign="top"><p>Notes</p></td>
                <td width="156" colspan="4" valign="top"><p>  <obs class="remarks" conceptId="163042AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"  rows="5" cols="60"
                /></p></td>
            </tr>

            <tr>
                <td width="156" valign="top"><p>Condoms Provided</p></td>
                <td width="156" valign="top"><p>  <obs id="cervical_screened" class="consent" conceptId="164934"
                                                       style="radio" answerConceptIds="1065,1066" /></p></td>

                <td width="156" valign="top" colspan="1" ><p> No. of condoms<obs id="malecondoms" conceptId="165041"/></p></td>


                <td width="156" valign="top"><p> Lubricant Provided <obs id="cervical_screened" class="consent" conceptId="164934"
                                                       style="radio" answerConceptIds="1065,1066" /></p></td>

                <td width="156" valign="top" ><p> No. of lubricants<obs id="malecondoms" conceptId="165041"/></p></td>

            </tr>
            <tr>
                <td width="156" valign="top"><p>  Partner Refferal Done:
                </p></td>
                <td width="156" valign="top"><p>  <obs id="refered_for_fp" class="consent" conceptId="164820"
                                                       style="radio"
                />
                </p></td>
            </tr>
            <tr>
                <td width="156" valign="top"><p>Next Appointment Date</p></td>
                <td width="156" valign="top"><p> <obs id="expiry-date" conceptId="162502AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" allowFutureDates="true"
                /></p></td>


            </tr>

            <tr>
                <td width="156" valign="top"><p>Provider Name</p></td>
                <td width="156" valign="top"><p> <obs id="typeofpep" class="consent" conceptId="165046"
                                                                        answerConceptIds="127910,
                                                            165045, 160632"  answerLabels="Rape,Condom Burst, Others"
                                                                        style="dropdown" rows="2" />
                </p></td>


            </tr>
        </table>

    </fieldset>


    <div class="ke-form-footer">
        <submit/>
    </div>

</htmlform>